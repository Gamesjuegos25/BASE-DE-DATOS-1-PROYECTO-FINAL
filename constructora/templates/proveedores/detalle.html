{% extends "base.html" %}

{% block head %}
    <!-- CSS espec√≠fico para p√°ginas de detalle -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/detail-page.css') }}">
    
    <!-- CSS para p√°ginas de detalle -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/detail-page.css') }}">{% endblock %}

{% block title %}Detalle Proveedor{% endblock %}
{% block content %}
<div class="page-header">
  <nav class="breadcrumb">
    <a href="{{ url_for('dashboard') }}">Dashboard</a>
    <span class="breadcrumb-separator">/</span>
    <a href="{{ url_for('listar_proveedores') }}">Proveedores</a>
    <span class="breadcrumb-separator">/</span>
    <span>Detalle</span>
  </nav>
  <h1 class="page-title">üè¢ {{ proveedor.nombre or 'Proveedor' }} <small class="text-vanilla-600">ID: {{ proveedor.id_proveedor }}</small></h1>
</div>

<div class="flex flex-wrap -mx-2">
  <div class="flex-1 px-2-md-8">
    <div class="detail-card">
      <div class="stat-stat-header">
        <h4 style="color: var(--prussian-blue-600); margin-bottom: var(--spacing-md); display: flex; align-items: center; gap: var(--spacing-sm);"><i class="fas fa-building text-prussian-blue text-xanthous"></i>Informaci√≥n de la Empresa</h4>
      </div>
      <div class="stat-module-content">
        <dl class="flex flex-wrap -mx-2">
          <dt class="flex-1 px-2-sm-4"><i class="fas fa-tag"></i> Nombre Comercial</dt>
          <dd class="flex-1 px-2-sm-8">
            <strong>{{ proveedor.nombre or 'N/D' }}</strong>
          </dd>
          
          <dt class="flex-1 px-2-sm-4"><i class="fas fa-industry"></i> Tipo de Proveedor</dt>
          <dd class="flex-1 px-2-sm-8">
            <span class="status-badge-detail">{{ proveedor.tipo or 'Comercial' }}</span>
          </dd>
          
          <dt class="flex-1 px-2-sm-4"><i class="fas fa-info-circle text-prussian-blue-700"></i> Estado</dt>
          <dd class="flex-1 px-2-sm-8">
            {% set estado_class = {
              'Activo': 'success',
              'Inactivo': 'secondary',
              'Suspendido': 'danger'
            } %}
            <span class="status-badge-detail {{ estado_class.get(proveedor.estado, 'success') }}">
              {{ proveedor.estado or 'Activo' }}
            </span>
          </dd>
          
          <dt class="flex-1 px-2-sm-4"><i class="fas fa-map-marker-alt"></i> Direcci√≥n</dt>
          <dd class="flex-1 px-2-sm-8">
            {% if proveedor.direccion %}
              <i class="fas fa-location-arrow text-prussian-blue"></i> {{ proveedor.direccion }}
            {% else %}
              <span class="text-vanilla-600">No disponible</span>
            {% endif %}
          </dd>
        </dl>
      </div>
    </div>
  </div>
  
  <div class="flex-1 px-2-md-4">
    <div class="detail-card">
      <div class="stat-stat-header">
        <h4 style="color: var(--prussian-blue-600); margin-bottom: var(--spacing-md); display: flex; align-items: center; gap: var(--spacing-sm);"><i class="fas fa-address-book text-xanthous"></i>Informaci√≥n de Contacto</h4>
      </div>
      <div class="stat-module-content">
        <div class="contact-info">
          <div class="mb-3">
            <small class="text-vanilla-600">Tel√©fono Principal:</small><br>
            {% if proveedor.contacto %}
              <a href="tel:{{ proveedor.contacto }}" class="btn btn-outline-primary btn-sm">
                <i class="fas fa-phone"></i> {{ proveedor.contacto }}
              </a>
            {% else %}
              <span class="text-vanilla-600">No disponible</span>
            {% endif %}
          </div>
          
          <div class="mb-3">
            <small class="text-vanilla-600">Email Comercial:</small><br>
            {% if proveedor.email %}
              <a href="mailto:{{ proveedor.email }}" class="btn btn-outline-info btn-sm">
                <i class="fas fa-envelope"></i> {{ proveedor.email }}
              </a>
            {% else %}
              <span class="text-vanilla-600">No disponible</span>
            {% endif %}
          </div>
        </div>
      </div>
    </div>
    
    <div class="detail-card">
      <div class="stat-stat-header">
        <h4 style="color: var(--prussian-blue-600); margin-bottom: var(--spacing-md); display: flex; align-items: center; gap: var(--spacing-sm);"><i class="fas fa-chart-bar text-xanthous text-xanthous"></i>Estad√≠sticas</h4>
      </div>
      <div class="stat-module-content text-center">
        <div class="stats-info">
          <div class="mb-3">
            <h4 class="text-prussian-blue-700 mb-1">0</h4>
            <small class="text-vanilla-600">Materiales Suministrados</small>
          </div>
          
          <div class="mb-3">
            <h4 class="text-xanthous-600 mb-1">Q0.00</h4>
            <small class="text-vanilla-600">Total Facturado</small>
          </div>
          
          <div class="mb-2">
            <h4 class="text-orange-wheel mb-1">0</h4>
            <small class="text-vanilla-600">√ìrdenes Pendientes</small>
          </div>
        </div>
      </div>
    </div>
    
    <div class="detail-card">
      <div class="stat-stat-header">
        <h4 style="color: var(--prussian-blue-600); margin-bottom: var(--spacing-md); display: flex; align-items: center; gap: var(--spacing-sm);"><i class="fas fa-cogs text-xanthous"></i>Acciones</h4>
      </div>
      <div class="stat-module-content">
        <div class="flex flex-col gap-2">
          <a class="btn btn btn btn-warm-primary" href="{{ url_for('editar_proveedor', id=proveedor.id_proveedor) }}">
            <i class="fas fa-edit"></i> Editar Proveedor
          </a>
          <a class="btn btn btn btn-warm-primary" href="{{ url_for('listar_materiales') }}?proveedor={{ proveedor.id_proveedor }}">
            <i class="fas fa-boxes text-vanilla-100"></i> Ver Materiales
          </a>
          <a class="btn btn btn-accent" href="{{ url_for('crear_material') }}?proveedor={{ proveedor.id_proveedor }}">
            <i class="fas fa-plus"></i> Agregar Material
          </a>
          <a class="btn btn btn btn-warm-secondary" href="{{ url_for('listar_proveedores') }}">
            <i class="fas fa-arrow-left"></i> Volver a Lista
          </a>
          <form action="{{ url_for('eliminar_proveedor', id=proveedor.id_proveedor) }}" method="post" onsubmit="return confirm('¬øEliminar este proveedor?');" class="mt-2">
            <button class="btn btn btn btn-warm-danger w-100" type="submit">
              <i class="fas fa-trash"></i> Eliminar
            </button>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>

<style>
.contact-info .btn {
  width: 100%;
  text-align: left;
}

.stats-info h4 {
  font-size: 1.8rem;
  font-weight: bold;
}

.card-header h5 {
  color: #495057;
}

.badge {
  font-size: 0.9rem;
}

.gap-2 > * + * {
  margin-top: 0.5rem;
}
</style>
{% endblock %}
